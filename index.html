<!DOCTYPE html>
<html lang="no">
<head>
  <meta charset="UTF-8" />
  <title>Sommerferie 2025</title>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      margin-top: 50px;
    }
    .count {
      font-size: 1.8rem;
      margin-bottom: 20px;
    }
  </style>
</head>
<body>
  <h1>Nedtelling til 4. juli 2025 kl. 15:30</h1>
  <div class="count" id="countdown"></div>
  <div class="count" id="workdays"></div>

  <script>
    const targetDate = new Date("2025-07-04T15:30:00");

    function updateCountdown() {
      const now = new Date();
      const timeDiff = targetDate - now;

      if (timeDiff <= 0) {
        document.getElementById("countdown").textContent = "Tidspunktet er passert!";
        document.getElementById("workdays").textContent = "";
        return;
      }

      // Tid igjen
      const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
      const hours = Math.floor((timeDiff / (1000 * 60 * 60)) % 24);
      const minutes = Math.floor((timeDiff / (1000 * 60)) % 60);
      const seconds = Math.floor((timeDiff / 1000) % 60);

      document.getElementById("countdown").textContent =
        `${days} dager, ${hours} timer, ${minutes} minutter, ${seconds} sekunder`;

      // Arbeidsdager igjen
      document.getElementById("workdays").textContent =
        `Arbeidsdager igjen: ${getWorkdaysLeft(now, targetDate)}`;
    }

    function countWorkingDays(startDate, endDate) {
      let workdays = 0;
      let current = new Date(startDate);
      current.setHours(0, 0, 0, 0);

      while (current <= endDate) {
        const day = current.getDay();
        if (day !== 0 && day !== 6) {
          workdays++;
        }
        current.setDate(current.getDate() + 1);
      }

      return workdays;
    }

    function getWorkdaysLeft(now, endDate) {
      const cutoffHour = 15;
      const cutoffMin = 30;

      let startDate = new Date(now);

      // Hvis vi er forbi cutoff i dag, starter vi Ã¥ telle fra i morgen
      if (
        now.getHours() > cutoffHour ||
        (now.getHours() === cutoffHour && now.getMinutes() >= cutoffMin)
      ) {
        startDate.setDate(startDate.getDate() + 1);
      }

      startDate.setHours(0, 0, 0, 0);

      return countWorkingDays(startDate, endDate);
    }

    updateCountdown();
    setInterval(updateCountdown, 1000);
  </script>
</body>
</html>
